<p>The <code class="highlighter-rouge">csv().to</code> property provides functions to read from a CSV instance and
to write to an external destination. The destination may be a stream, a file
or a callback.</p>

<p>You may call the <code class="highlighter-rouge">to</code> function or one of its sub function. For example, 
here are two identical ways to write to a file:</p>

<p>```javascript</p>

<p>csv.from(data).to(‘/tmp/data.csv’);
csv.from(data).to.path(‘/tmp/data.csv’);
```</p>

<p><a name="to"></a>
<code class="highlighter-rouge">to(mixed)</code>
———–</p>

<p>Write from any sort of destination. It should be considered as a convenient function 
which will discover the nature of the destination where to write the CSV data.</p>

<p>If the parameter is a function, then the csv will be provided as the first argument 
of the callback. If it is a string, then it is expected to be a 
file path. If it is an instance of <code class="highlighter-rouge">stream</code>, it consider the object to be an<br />
output stream.</p>

<p>Here’s some examples on how to use this function:</p>

<p>```javascript</p>

<p>csv()
.from(‘“1”,”2”,”3”,”4”,”5”’)
.to(function(data){ console.log(data) })</p>

<p>csv()
.from(‘“1”,”2”,”3”,”4”,”5”’)
.to(‘./path/to/file.csv’)</p>

<p>csv()
.from(‘“1”,”2”,”3”,”4”,”5”’)
.to(fs.createWriteStream(‘./path/to/file.csv’))
```</p>

<p><a name="to.options"></a>
<code class="highlighter-rouge">to.options([options])</code>
———————–</p>

<p>Update and retrieve options relative to the output. Return the options 
as an object if no argument is provided.</p>

<ul>
  <li><code class="highlighter-rouge">delimiter</code>   Set the field delimiter, one character only, defaults to <code class="highlighter-rouge">options.from.delimiter</code> which is a comma.</li>
  <li><code class="highlighter-rouge">quote</code>       Defaults to the quote read option.</li>
  <li><code class="highlighter-rouge">quoted</code>      Boolean, default to false, quote all the fields even if not required.</li>
  <li><code class="highlighter-rouge">escape</code>      Defaults to the escape read option.</li>
  <li><code class="highlighter-rouge">columns</code>     List of fields, applied when <code class="highlighter-rouge">transform</code> returns an object, order matters, read the transformer documentation for additionnal information.</li>
  <li><code class="highlighter-rouge">header</code>      Display the column names on the first line if the columns option is provided.</li>
  <li><code class="highlighter-rouge">lineBreaks</code>  String used to delimit record rows or a special value; special values are ‘auto’, ‘unix’, ‘mac’, ‘windows’, ‘unicode’; defaults to ‘auto’ (discovered in source or ‘unix’ if no source is specified).</li>
  <li><code class="highlighter-rouge">flags</code>       Defaults to ‘w’, ‘w’ to create or overwrite an file, ‘a’ to append to a file. Applied when using the <code class="highlighter-rouge">toPath</code> method.</li>
  <li><code class="highlighter-rouge">newColumns</code>  If the <code class="highlighter-rouge">columns</code> option is not specified (which means columns will be taken from the reader options, will automatically append new columns if they are added during <a name="transform"></a>
<code class="highlighter-rouge">transform()</code>.</li>
  <li><code class="highlighter-rouge">end</code>         Prevent calling <code class="highlighter-rouge">end</code> on the destination, so that destination is no longer writable.</li>
  <li><code class="highlighter-rouge">eof</code>         Add a linebreak on the last line, default to false, expect a charactere or use ‘\n’ if value is set to “true”</li>
</ul>

<p>The end options is similar to passing <code class="highlighter-rouge"><span class="p">{</span><span class="err">end:</span><span class="w"> </span><span class="err">false</span><span class="p">}</span></code> option in <a name="stream.pipe"></a>
<code class="highlighter-rouge">stream.pipe()</code>. According to the Node.js documentation:
&gt; By default end() is called on the destination when the source stream emits end, so that destination is no longer writable. Pass { end: false } as options to keep the destination stream open.</p>

<p><a name="to.string"></a>
<code class="highlighter-rouge">to.string(callback, [options])</code>
——————————</p>

<p>Provide the output string to a callback.</p>

<p>```javascript</p>

<p>csv()
.from( ‘“1”,”2”,”3”\n”a”,”b”,”c”’ )
.to.string( function(data, count){} )</p>

<p>```</p>

<p>Callback is called with 2 arguments:
*   data      Entire CSV as a string
*   count     Number of stringified records</p>

<p><a name="to.stream"></a>
<code class="highlighter-rouge">to.stream(stream, [options])</code>
——————————</p>

<p>Write to a stream. Take a writable stream as first argument and<br />
optionally an object of options as a second argument.</p>

<p>Additionnal options may be defined. See the <a href="http://www.nodejs.org/api/stream.html#stream_readable_pipe_destination_options"><code class="highlighter-rouge">readable.pipe</code> 
documentation</a> for additionnal information.</p>

<p><a name="to.path"></a>
<code class="highlighter-rouge">to.path(path, [options])</code>
————————–</p>

<p>Write to a path. Take a file path as first argument and optionally an object of 
options as a second argument. The <code class="highlighter-rouge">close</code> event is sent after the file is written. 
Relying on the <code class="highlighter-rouge">end</code> event is incorrect because it is sent when parsing is done 
but before the file is written.</p>

<p>Additionnal options may be defined with the following default:</p>

<p>```javascript</p>

<p>{ flags: ‘w’,
  encoding: null,
  mode: 0666 }</p>

<p>```</p>

<p>See the <a href="http://www.nodejs.org/api/fs.html#fs_fs_createwritestream_path_options"><code class="highlighter-rouge">fs.createReadStream</code> documentation</a> for additionnal information.</p>

<p>Example to modify a file rather than replacing it:</p>

<p>```javascript</p>

<p>csv()
.to.file(‘my.csv’, {flags:’r+’})
.write([‘hello’, ‘node’])
.end()
```</p>

<p><a name="to.array"></a>
<code class="highlighter-rouge">to.array(path, [options])</code>
————————–</p>

<p>Provide the output string to a callback.</p>

<p>```javascript</p>

<p>csv()
.from( ‘“1”,”2”,”3”\n”a”,”b”,”c”’ )
.to.array( function(data, count){} )</p>

<p>```</p>

<p>Callback is called with 2 arguments:
*   data      Entire CSV as an array of records
*   count     Number of stringified records</p>

